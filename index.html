<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Editor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body style="margin: 1%;">
    <script>
        //      0 = Schwarz         8 = Grau
        //      1 = Blau            9 = Hellblau
        //      2 = Grün            A = Hellgrün
        //      3 = Türkis          B = Helltürkis
        //      4 = Rot             C = Hellrot
        //      5 = Lila            D = Helllila
        //      6 = Gelb            E = Hellgelb
        //      7 = Hellgrau        F = Weiß

        const params = new URLSearchParams(document.location.search);
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            var color = "#0a"
        }
        else {
            var color = "#e0"
        }
        var font_size = 16
        if (params.get("color") != null) {
            color = "#"+params.get("color")
        }
        if (params.get("font-size") != null) {
            font_size = params.get("font-size")
        }
        console.info("Font Size:       " + font_size + "pt")
        console.log("Selected Color:  " + color + "")
        console.log("All available colors:\n\
0 = Black           8 = Gray\n\
1 = Blue            9 = light Blue\n\
2 = Green           A = light Green\n\
3 = Cyan            B = light Cyan\n\
4 = Red             C = light Red\n\
5 = Purple          D = light Purple\n\
6 = Yellow          E = light Yellow\n\
7 = light Gray      F = White")

        var color1 = 0;
        var color2 = 0;

        if (color[2] == "0") {
            color2 = "black"
        }
        if (color[2] == "1") {
            color2 = "blue"
        }
        if (color[2] == "2") {
            color2 = "green"
        }
        if (color[2] == "3") {
            color2 = "darkcyan"
        }
        if (color[2] == "4") {
            color2 = "red"
        }
        if (color[2] == "5") {
            color2 = "purple"
        }
        if (color[2] == "6") {
            color2 = "yellow"
        }
        if (color[2] == "7") {
            color2 = "lightgray"
        }
        if (color[2] == "8") {
            color2 = "gray"
        }
        if (color[2] == "9") {
            color2 = "lightblue"
        }
        if (color[2] == "a") {
            color2 = "lime"
        }
        if (color[2] == "b") {
            color2 = "cyan"
        }
        if (color[2] == "c") {
            color2 = "tomato"
        }
        if (color[2] == "d") {
            color2 = "violet"
        }
        if (color[2] == "e") {
            color2 = "lightyellow"
        }
        if (color[2] == "f") {
            color2 = "white"
        }

        if (color[1] == "0") {
            color1 = "black"
        }
        if (color[1] == "1") {
            color1 = "blue"
        }
        if (color[1] == "2") {
            color1 = "green"
        }
        if (color[1] == "3") {
            color1 = "darkcyan"
        }
        if (color[1] == "4") {
            color1 = "red"
        }
        if (color[1] == "5") {
            color1 = "purple"
        }
        if (color[1] == "6") {
            color1 = "yellow"
        }
        if (color[1] == "7") {
            color1 = "lightgray"
        }
        if (color[1] == "8") {
            color1 = "gray"
        }
        if (color[1] == "9") {
            color1 = "lightblue"
        }
        if (color[1] == "a") {
            color1 = "lime"
        }
        if (color[1] == "b") {
            color1 = "cyan"
        }
        if (color[1] == "c") {
            color1 = "tomato"
        }
        if (color[1] == "d") {
            color1 = "violet"
        }
        if (color[1] == "e") {
            color1 = "lightyellow"
        }
        if (color[1] == "f") {
            color1 = "white"
        }

        document.body.insertAdjacentHTML( 'afterbegin', '<div id="myID"><textarea id="textarea2" style="width: 1000vw; height: 1000vh\
            ; background-color: ' + color1 + '; color: ' + color2 + '; font-family: Consolas; font-size: ' + font_size + 'pt; padding-left: 1.50vw; padding-top: 2.25vh;"\
            > --- Welcome to Text Editor v1 --- </textarea></div> <textarea id="input-file-name" class="name-text menu-button" style="background-color: ' + color1 + '; color: ' + color2 + '; font-family: Consolas; font-size: ' + 12 + 'pt;">file name</textarea>' );
        
        function download(){
            var text = document.getElementById("textarea2").value;
            text = text.replace(/\n/g, "\r\n"); // To retain the Line breaks.
            var blob = new Blob([text], { type: "text/plain"});
            var anchor = document.createElement("a");
            var title = document.getElementById("input-file-name").value;
            if (title == "file name") {
                title = "(TextEditor) Text File ";
            };
            anchor.download = title + ".txt";
            anchor.href = window.URL.createObjectURL(blob);
            anchor.target ="_blank";
            anchor.style.display = "none"; // just to be safe!
            document.body.appendChild(anchor);
            anchor.click();
            document.body.removeChild(anchor);
        }

        function upload(){
            alert("TextEditor\n      ---\nThis feature isn't currently released, but contains unfinished parts in the code.")
        }

        document.getElementById('upload_button').addEventListener('change', function() {
            var GetFile = new FileReader();
            GetFile.onload=function(){
                document.getElementById('textarea2').value=GetFile.result;
            }
            GetFile.readAsText(this.files[0]);
        })

    </script>
    <button type="button" onclick="download()" class="save-button menu-button">Save</button>
    <input title="input" type="file" id="upload_button" style="width: 0;"/>
    <button type="button" onclick="upload()" class="load-button menu-button">Load</button>

</body>
</html>
